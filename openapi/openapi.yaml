openapi: "3.0.0"
info:
  title: "Student Enrollment API"
  version: "0.2.0"
servers:
  - url: "https://api.example.edu/api/v1"

paths:
  /health:
    get:
      summary: "Health check"
      description: "æœå‹™æ˜¯å¦æ­£å¸¸"
      security: []                         # è¦†å¯«ï¼šæ­¤ç«¯é»åŒ¿å (å…¬é–‹)
      responses:
        "200": { description: "OK" }

  /students:
    get:
      summary: "List students"
      description: "éœ€è¦ students.read scope"
      # é€™è£¡æ²’æœ‰å¯« securityï¼Œæ‰€ä»¥æœƒç¹¼æ‰¿æœ€ä¸‹é¢çš„å…¨åŸŸè¨­å®š (éœ€è¦ read)
      responses: { "200": { description: "OK" } }
    post:
      summary: "Create student"
      description: "éœ€è¦ students.write scope"
      security:
        # ğŸ‘‡ ä¿®æ”¹ï¼šé€™è£¡è¦ç”¨å®Œæ•´çš„ Scope ç¶²å€
        - CognitoOAuth2: ["https://api.example.edu/students.write"]
      responses:
        "201":
          description: "Created"
          headers:
            Location:
              description: "URL of created resource"
              schema: { type: string, example: "/api/v1/students/102" }

components:
  securitySchemes:
    CognitoOAuth2:
      type: oauth2
      flows:
        authorizationCode:
          # ä½ çš„ AWS ç¶²å€
          authorizationUrl: "https://us-east-1q3nrxhpcr.auth.us-east-1.amazoncognito.com/oauth2/authorize"
          tokenUrl:         "https://us-east-1q3nrxhpcr.auth.us-east-1.amazoncognito.com/oauth2/token"
          scopes:
            "https://api.example.edu/students.read":  "Read student data"
            "https://api.example.edu/students.write": "Create/modify student data"

# å…¨åŸŸè¨­å®šï¼šé è¨­æ‰€æœ‰ç«¯é»éƒ½éœ€è¦ students.read
security:
  - CognitoOAuth2: ["https://api.example.edu/students.read"]